!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).Calendar=n()}(this,function(){"use strict";function n(t){return this instanceof n?(this.options=t,this.mouths=[31,28,31,30,31,30,31,31,30,31,30,31],this.today=this.getToday(),this.currentYear=this.getFullYear(),this.currentMonth=this.getMonth(),this.leap(),this):new n(t)}return n.prototype={constructor:n,leap:function(t){this.currentYear=t||this.currentYear,this.mouths[1]=this.currentYear%400==0||this.currentYear%4==0?29:28},getDate:function(){return(new Date).getDate()},getDay:function(){return(new Date).getDay()},getFullYear:function(){return(new Date).getFullYear()},getMonth:function(){return(new Date).getMonth()},getToday:function(){return"".concat(this.getFullYear(),"-").concat(1+this.getMonth(),"-").concat(this.getDate())},getPosDay:function(t,n,e){return new Date(t,n,2<arguments.length&&void 0!==e?e:1,0,0,0).getDay()},nextMonth:function(t){var n=t+1,e=n<this.mouths.length,r=e?n:0;return{isNextYear:!e,days:Array(this.mouths[r]+1).join("*").split("").map(function(t,n){return n+1}),index:r}},prevMonth:function(t){var n=t-1,e=n<0,r=e?11:n;return{isPrevYear:e,days:Array(this.mouths[r]+1).join("*").split("").map(function(t,n){return n+1}),index:r}},getOtherMonth:function(t){return{nextMonthDays:this.nextMonth(t),prevMonth:this.prevMonth(t)}},paint:function(t,n){this.currentYear=n||this.currentYear,this.currentMonth=t||this.currentMonth,this.leap();var e=this.getCalendar(this.mouths[this.currentMonth]+1,this.currentYear,this.currentMonth);return this.options.callback&&this.options.callback(e),this},next:function(){var t=this.currentMonth+1<this.mouths.length;return this.currentMonth=t?this.currentMonth+1:0,t||(this.currentYear=this.currentYear+1),this},prev:function(){var t=this.currentMonth-1<0;return this.currentMonth=t?11:this.currentMonth-1,t&&(this.currentYear=this.currentYear-1),this},toYear:function(t){return this.currentYear=t,this},init:function(){return this.currentYear=this.getFullYear(),this.currentMonth=this.getMonth(),this},meta:function(t){return this.options&&this.options.meta&&this.options.meta(t)},getCalendar:function(t,n,e){for(var r=this.getPosDay(n,e),i=this.getOtherMonth(this.currentMonth),o=this.getPosDay(n,e,t-1),a=0!==r?i.prevMonth.days.slice(-r):[],h=i.nextMonthDays.days.slice(0,6-o),s=i.prevMonth.isPrevYear?n-1:n,c=i.nextMonthDays.isNextYear?n+1:n,u=this.getToday(),d=[],M=0;M<a.length;M++){var f={target:"prev",isAction:!1,isToday:"".concat(s,"-").concat(i.prevMonth.index+1,"-").concat(a[M])===u,date:new Date(s,i.prevMonth.index,a[M],0,0,0),dateStr:"".concat(s,"-").concat(i.prevMonth.index+1,"-").concat(a[M]),year:s,month:i.prevMonth.index+1,day:a[M]};f.meta=this.meta(f),d.push(f)}for(var y=1;y<t;y++){var p={target:"current",isAction:!1,isToday:"".concat(n,"-").concat(e+1,"-").concat(y)===u,date:new Date(n,e,y,0,0,0),dateStr:"".concat(n,"-").concat(e+1,"-").concat(y),year:n,month:e+1,day:y};p.meta=this.meta(p),d.push(p)}for(var g=0;g<h.length;g++){var l={target:"next",isAction:!1,isToday:"".concat(c,"-").concat(i.nextMonthDays.index+1,"-").concat(h[g])===u,date:new Date(c,i.nextMonthDays.index,h[g],0,0,0),dateStr:"".concat(c,"-").concat(i.nextMonthDays.index+1,"-").concat(h[g]),year:c,month:i.nextMonthDays.index+1,day:h[g]};l.meta=this.meta(l),d.push(l)}return d},year:function(){return this.currentYear},month:function(){return this.currentMonth+1}},n});
