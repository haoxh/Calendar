!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Calendar=e()}(this,function(){"use strict";function e(t){if(!(this instanceof e))return new e(t);if(!function(t){return"[object Object]"===Object.prototype.toString.call(t)}(t))throw TypeError(" Calendar argument must be an object");return this.options=t,this.mouths=[31,28,31,30,31,30,31,31,30,31,30,31],this.today=this.getToday(),this.currentYear=this.getFullYear(),this.currentMonth=this.getMonth(),this.leap(),this}return e.prototype={constructor:e,leap:function(t){this.currentYear=t||this.currentYear,this.mouths[1]=this.currentYear%400==0||this.currentYear%4==0?29:28},getDate:function(){return(new Date).getDate()},getDay:function(){return(new Date).getDay()},getFullYear:function(){return(new Date).getFullYear()},getMonth:function(){return(new Date).getMonth()},getToday:function(){return"".concat(this.getFullYear(),"-").concat(1+this.getMonth(),"-").concat(this.getDate())},getPosDay:function(t,e,n){return new Date(t,e,2<arguments.length&&void 0!==n?n:1,0,0,0).getDay()},format:function(t){var e=t.replace&&t.replace(/(YYYY)|MM|DD/g,"").split("");return Array.isArray(e)&&(this.ys=e[0],this.ms=e[1]),this},nextMonth:function(t){var e=t+1,n=e<this.mouths.length,r=n?e:0;return{isNextYear:!n,days:Array(this.mouths[r]+1).join("*").split("").map(function(t,e){return e+1}),index:r}},prevMonth:function(t){var e=t-1,n=e<0,r=n?11:e;return{isPrevYear:n,days:Array(this.mouths[r]+1).join("*").split("").map(function(t,e){return e+1}),index:r}},getOtherMonth:function(t){return{nextMonthDays:this.nextMonth(t),prevMonth:this.prevMonth(t)}},paint:function(t,e){this.currentYear=e||this.currentYear,this.currentMonth=t||this.currentMonth,this.leap();var n=this.getCalendar(this.mouths[this.currentMonth]+1,this.currentYear,this.currentMonth);return this.options.callback&&this.options.callback(n),this},next:function(){var t=this.currentMonth+1<this.mouths.length;return this.currentMonth=t?this.currentMonth+1:0,t||(this.currentYear=this.currentYear+1),this},prev:function(){var t=this.currentMonth-1<0;return this.currentMonth=t?11:this.currentMonth-1,t&&(this.currentYear=this.currentYear-1),this},toYear:function(t){return this.currentYear=t,this},init:function(){return this.currentYear=this.getFullYear(),this.currentMonth=this.getMonth(),this},meta:function(t){return this.options&&this.options.meta&&this.options.meta(t)},getCalendar:function(t,e,n){for(var r=this.getPosDay(e,n),o=this.getOtherMonth(this.currentMonth),a=this.getPosDay(e,n,t-1),i=0!==r?o.prevMonth.days.slice(-r):[],h=o.nextMonthDays.days.slice(0,6-a),s=o.prevMonth.isPrevYear?e-1:e,c=o.nextMonthDays.isNextYear?e+1:e,u=this.getToday(),y=this.ys||"/",d=this.ms||"/",M=[],f=0;f<i.length;f++){var p={target:"prev",week:this.getPosDay(s,o.prevMonth.index,i[f]),isToday:"".concat(s,"-").concat(o.prevMonth.index+1,"-").concat(i[f])===u,date:new Date(s,o.prevMonth.index,i[f],0,0,0),dateStr:"".concat(s).concat(y).concat(o.prevMonth.index+1).concat(d).concat(i[f]),year:s,month:o.prevMonth.index+1,day:i[f]};p.meta=this.meta(p),M.push(p)}for(var g=1;g<t;g++){var l={target:"current",week:this.getPosDay(e,n,g),isToday:"".concat(e,"-").concat(n+1,"-").concat(g)===u,date:new Date(e,n,g,0,0,0),dateStr:"".concat(e).concat(y).concat(n+1).concat(d).concat(g),year:e,month:n+1,day:g};l.meta=this.meta(l),M.push(l)}for(var m=0;m<h.length;m++){var D={target:"next",week:this.getPosDay(c,o.nextMonthDays.index,h[m]),isToday:"".concat(c,"-").concat(o.nextMonthDays.index+1,"-").concat(h[m])===u,date:new Date(c,o.nextMonthDays.index,h[m],0,0,0),dateStr:"".concat(c).concat(y).concat(o.nextMonthDays.index+1).concat(d).concat(h[m]),year:c,month:o.nextMonthDays.index+1,day:h[m]};D.meta=this.meta(D),M.push(D)}return M},year:function(){return this.currentYear},month:function(){return this.currentMonth+1}},e});
